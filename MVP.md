# MVP (Minimum Viable Product) 정의서
## 일본어 학습 웹앱 v1.0

**목표**: 가장 핵심적인 기능만으로 빠르게 프로토타입을 만들어 검증하고, 이후 점진적으로 기능을 추가

---

## 1. MVP 목표

### 1.1 핵심 가치 검증
- **가설**: 교재 사진을 찍으면 자동으로 단어장을 만들고, Anki처럼 반복 학습할 수 있다면 학습 효율이 올라갈 것이다.
- **검증**: 실제로 OCR이 잘 작동하는지, 사용자가 학습에 활용할 수 있을지 테스트

### 1.2 MVP 범위
**포함되는 기능**:
✅ 이미지 업로드 및 OCR  
✅ 단어 수동 교정 및 저장  
✅ 기본 플래시카드 (앞/뒷면)  
✅ SRS 알고리즘 (복습 일정 관리)  
✅ 단어 목록 조회

**제외되는 기능** (v1.1 이후):
❌ 문법 관리  
❌ 한자 상세 정보  
❌ 통계 대시보드  
❌ 데이터 내보내기/가져오기  
❌ 음성 합성(TTS)

---

## 2. MVP 기능 상세

### 2.1 기능 1: 이미지 업로드 및 OCR (Must-Have)

**사용자 스토리**:
> "교재 페이지를 사진으로 찍어서 업로드하면, 자동으로 단어가 추출되기를 원한다."

**기능 요구사항**:
- [ ] 파일 선택 또는 드래그 앤 드롭으로 이미지 업로드
- [ ] 업로드 후 즉시 OCR 처리 시작
- [ ] 처리 중 로딩 인디케이터 표시
- [ ] OCR 결과를 텍스트로 표시 (원본 텍스트)
- [ ] 형태소 분석 후 단어 후보 목록 표시

**기술 스택**:
- Backend: EasyOCR + Fugashi (MeCab)
- Frontend: React Dropzone 또는 기본 input

**완료 기준**:
- OCR 정확도가 70% 이상 (명확한 인쇄본 기준)
- 사용자가 결과를 확인하고 수정할 수 있음

---

### 2.2 기능 2: 단어 교정 및 저장 (Must-Have)

**사용자 스토리**:
> "OCR이 틀린 부분을 수정하고, 필요한 단어만 선택해서 저장하고 싶다."

**기능 요구사항**:
- [ ] 추출된 단어 목록을 테이블 형태로 표시
- [ ] 각 단어의 한자, 읽기, 품사를 수정 가능한 입력 필드로 제공
- [ ] 단어별 체크박스로 "저장할 단어" 선택
- [ ] "의미" 필드를 사용자가 직접 입력
- [ ] "저장" 버튼으로 선택된 단어들을 DB에 저장

**UI 와이어프레임**:
```
┌─────────────────────────────────────────┐
│ 추출된 단어 목록 (5개)                  │
├──────┬──────┬──────┬──────┬────────────┤
│ 선택 │ 한자 │ 읽기 │ 품사 │ 의미       │
├──────┼──────┼──────┼──────┼────────────┤
│ [✓]  │ 食べる│たべる│ 동사│ [먹다_____]│
│ [✓]  │ 学校 │がっこう│명사│ [학교_____]│
│ [ ]  │ です  │です   │ 조사│ [__________]│
└──────┴──────┴──────┴──────┴────────────┘
         [저장하기] [취소]
```

**완료 기준**:
- 사용자가 단어를 수정하고 선택하여 저장할 수 있음
- 저장된 단어가 DB에 정상적으로 기록됨

---

### 2.3 기능 3: 기본 플래시카드 (Must-Have)

**사용자 스토리**:
> "저장된 단어를 카드 형태로 보면서 앞면(한자)을 보고 뒷면(읽기/뜻)을 맞춰보고 싶다."

**기능 요구사항**:
- [ ] 카드 앞면: 한자 또는 단어 표기
- [ ] 클릭 또는 버튼으로 뒷면 표시
- [ ] 뒷면: 읽기(후리가나), 의미 표시
- [ ] "알고 있음" / "모름" 버튼
- [ ] 다음 카드로 자동 이동

**UI 와이어프레임**:
```
┌─────────────────────────────────────┐
│          [오늘의 복습: 5장]          │
│                                     │
│      ┌─────────────────────┐        │
│      │                     │        │
│      │       食べる         │        │
│      │                     │        │
│      └─────────────────────┘        │
│                                     │
│    [뒷면 보기] (스페이스바)         │
│                                     │
│  [이전]              [다음]         │
└─────────────────────────────────────┘
```

**완료 기준**:
- 카드가 정상적으로 앞/뒷면 전환됨
- 키보드 단축키 작동 (스페이스바: 뒤집기, →: 다음)

---

### 2.4 기능 4: SRS 알고리즘 (Must-Have)

**사용자 스토리**:
> "한 번 외운 단어는 며칠 뒤에 다시 보고 싶고, 모르는 단어는 다음날 바로 보고 싶다."

**기능 요구사항**:
- [ ] "알고 있음" 클릭 시: 다음 복습일을 늦춤 (SM-2 알고리즘)
- [ ] "모름" 클릭 시: 다음 복습일을 내일로 설정
- [ ] "오늘의 복습" 메뉴에서 next_review <= 오늘인 단어만 조회
- [ ] 복습 횟수(reps) 자동 증가

**SRS 알고리즘 로직** (간소화 버전):
```python
def update_review(vocab_id, known: bool):
    if known:
        # 성공: 다음 복습일을 현재 간격 * ease_factor만큼 늦춤
        new_interval = current_interval * 2.5  # 최대 365일
        next_review = today + new_interval
    else:
        # 실패: 내일 다시
        new_interval = 1
        next_review = tomorrow
    
    update_database(vocab_id, interval=new_interval, next_review=next_review)
```

**완료 기준**:
- 학습 결과에 따라 복습 일정이 자동으로 업데이트됨
- "오늘의 복습"에 적절한 수의 카드가 표시됨 (10-30개)

---

### 2.5 기능 5: 단어 목록 조회 (Must-Have)

**사용자 스토리**:
> "저장한 모든 단어를 목록으로 보고 싶고, 검색도 하고 싶다."

**기능 요구사항**:
- [ ] 전체 단어 목록을 테이블로 표시
- [ ] 검색 기능 (한자, 읽기, 의미로 검색)
- [ ] 정렬 기능 (최신순, 한자순 등)
- [ ] 단어 클릭 시 상세 정보 표시 (선택사항)

**완료 기준**:
- 단어 목록이 정상적으로 표시됨
- 검색이 즉시 반영됨

---

## 3. MVP 데이터베이스 스키마 (최소)

MVP에서는 다음 두 테이블만 필요합니다:

```sql
-- 단어 테이블
CREATE TABLE Vocabulary (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    kanji TEXT NOT NULL,
    reading TEXT,
    meaning TEXT,
    pos TEXT,
    source_img TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- SRS 복습 관리 테이블
CREATE TABLE SRS_Review (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    vocab_id INTEGER,
    interval INTEGER DEFAULT 0,
    ease_factor FLOAT DEFAULT 2.5,
    next_review DATETIME DEFAULT CURRENT_TIMESTAMP,
    reps INTEGER DEFAULT 0,
    FOREIGN KEY (vocab_id) REFERENCES Vocabulary(id) ON DELETE CASCADE
);
```

---

## 4. MVP 개발 일정 (3주)

### Week 1: Backend 기본 구조 + OCR
- [ ] FastAPI 프로젝트 초기 설정
- [ ] SQLite DB 스키마 생성
- [ ] EasyOCR 연동 테스트
- [ ] 이미지 업로드 API 엔드포인트 구현
- [ ] OCR 결과 반환 API 구현

**완료 기준**: 이미지를 업로드하면 텍스트가 추출되는 것 확인

---

### Week 2: 형태소 분석 + Frontend 기본 UI
- [ ] Fugashi (MeCab) 형태소 분석 연동
- [ ] 단어 추출 로직 구현
- [ ] Next.js 프로젝트 초기 설정
- [ ] 이미지 업로드 UI 구현
- [ ] 단어 교정 UI 구현 (테이블 형태)

**완료 기준**: 이미지 업로드 → 단어 추출 → 수정 → 저장 플로우가 작동함

---

### Week 3: 플래시카드 + SRS 알고리즘
- [ ] SRS 알고리즘 구현 (SM-2 간소화 버전)
- [ ] 플래시카드 UI 구현
- [ ] 학습 결과 저장 API 구현
- [ ] "오늘의 복습" 카드 조회 API 구현
- [ ] 단어 목록 페이지 구현

**완료 기준**: 전체 플로우가 완성됨 (업로드 → 저장 → 학습 → 복습)

---

## 5. MVP 성공 기준

### 5.1 기능적 완성도
- [x] 이미지 업로드 및 OCR 정상 작동 (정확도 70% 이상)
- [x] 단어 저장 및 조회 정상 작동
- [x] 플래시카드 학습 정상 작동
- [x] SRS 알고리즘이 복습 일정을 정상적으로 관리

### 5.2 사용성
- 사용자가 10분 이내에 전체 플로우를 이해하고 사용할 수 있음
- 주요 버그 없이 1주일 동안 매일 사용 가능

### 5.3 기술적 완성도
- 코드가 읽기 쉽고 유지보수 가능한 구조
- 기본적인 에러 핸들링 구현
- README에 설치/실행 가이드 작성

---

## 6. MVP 이후 로드맵 (v1.1 ~ v1.2)

### v1.1 (4주차)
- 문법 관리 기능 추가
- 한자 정보 표시 (음독/훈독)
- UI 개선 (더 나은 디자인)

### v1.2 (6주차)
- 통계 대시보드 (학습 진도, 정답률)
- 데이터 내보내기/가져오기 (CSV)
- 단어 필터링 고도화

### v2.0 (향후)
- 음성 합성(TTS)
- 모바일 반응형 디자인
- 클라우드 동기화 (선택사항)

---

## 7. 리스크 관리

### MVP 단계에서 주의할 점

1. **OCR 정확도가 낮을 경우**
   - 대응: 수동 교정 UI를 매우 편리하게 만들기
   - 최소 목표: 70% 정확도 (나머지 30%는 수동 교정)

2. **형태소 분석 라이브러리 설치 복잡**
   - 대응: Docker 컨테이너로 패키징하거나, 설치 스크립트 제공

3. **SRS 알고리즘이 복잡해 보일 수 있음**
   - 대응: 사용자에게 "알고 있음/모름"만 선택하도록 단순화

---

## 8. 체크리스트

### 개발 시작 전
- [ ] 개발 환경 설정 완료 (Python, Node.js)
- [ ] MeCab 또는 Fugashi 설치 완료
- [ ] 프로젝트 디렉토리 구조 생성
- [ ] Git 저장소 초기화

### MVP 완료 후
- [ ] 전체 기능 테스트 완료
- [ ] 사용자 가이드(README) 작성
- [ ] 설치 가이드 작성
- [ ] 기본 버그 수정

---

**MVP 시작일**: [날짜]  
**MVP 완료 목표일**: [날짜 + 3주]  
**담당자**: [이름]